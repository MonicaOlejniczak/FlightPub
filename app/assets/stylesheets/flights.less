@import 'globalMethods';
@import 'globalVariables';

@filterStyleInputWidth: 50% - @filterStyleMargin;
@flightsWidth: calc(~'100% - @{sourceWidth}');
@nodeWidth: 2em;
@sourceWidth: 200px;
@buttonsWidth: @buttonWidth * 2 + @resultsPadding * 3;
@buttonWidth: 20em;

@sortHeight: 3em;
@flightHeight: @nodeWidth;
@flightBarHeight: 1.6em;

@sortBackgroundColor: @themeBackgroundColor;
@filterStyleBackgroundColor: @themeBackgroundColor;
@timeContainerBackgroundColor: lighten(@timeBackgroundColor, 10%);
@timeBackgroundColor: @secondaryBackgroundColor;
@flightsContainerBackgroundColor: @timeContainerBackgroundColor;
@flightsContainerGradientBackgroundColor: @timeBackgroundColor;
@flightBackgroundColor: @themeBackgroundColor;
@flightHoverBackgroundColor: lighten(@flightBackgroundColor, 20%);
@flightBarBackgroundColor: #fff;

@filterStyleColor: @filterStyleBackgroundColor;
@timeColor: @secondaryColor;
@flightBarBoxShadowColor: #555;

@tabFontSize: 1.5em;
@sortContainerFontSize: 1em;
@timeContainerFontSize: 1em;
@airportFontSize: 1em;

@tabFont: @tabFontSize 'Ubuntu', @nextFont;
@sortFont: @sortContainerFontSize 'Ubuntu', @nextFont;
@filterStyleFont: @sortFont;
@timeContainerFont: @timeContainerFontSize 'Ubuntu', @nextFont;
@airportFont: @airportFontSize 'Ubuntu', @nextFont;
@flightBarTextFont: @airportFont;

@tabBorderWidth: 0.3em;
@sortBorderWidth: 0.3em;
@sortLinkBorderWidth: 0.15em;
@filterStyleBorderWidth: 0.3em;
@flightBorderWidth: @nodeWidth;
@airportBorderWidth: 0.3em;
@arrowBorderWidth:  @arrowBorderWidthTransparent * 2;
@arrowBorderWidthTransparent: 0.5em;

@tabPadding: 0.5em;
@topContainerPadding: @tabPadding;
@sortPadding: @tabPadding;
@filterStylePadding: 0.5em;
@resultsPadding: 0%;
@timePadding: 0.5em;
@flightsPadding: 1em;

@tabMargin: @tabPadding;
@sortFilterMargin: 1em;
@filterStyleMargin: @filterStylePadding;
@flightMargin: @nodeWidth / 2;
@flightBarTextMarginTop: 0.2em;
@flightBarTextMarginLeft: 2em;

@sortBoxShadow: 0.03em;
@filterStyleBoxShadow: 0.05em;
@flightBoxShadow: 0.05em;
@flightBarBoxShadow: 0.05em;

@sortLineHeight: @sortHeight;

#flightsContainer, #topContainer, #sort, #results, #timeContainer, #flights, .flight, #buttons {
	clear: both;
}

#flightsContainer {
	min-width: @minWidth;
	background-color: @secondaryBackgroundColor;
	color: @secondaryColor;
}

.selectedTab a, #topContainer, #resultsContainer {
	background-color: @thirdBackgroundColor;
}

.selectedTab a, .deselectedTab a, #resultsContainer {
	color: @themeBackgroundColor;
}

.selectedTab a, .deselectedTab a {
	font: @tabFont;
	border-radius: @tabBorderWidth @tabBorderWidth 0 0;
	padding: @tabPadding;
	margin: @tabMargin 0 0 @tabMargin;
	float: left;
}

.deselectedTab a, .deselectedTab a:hover {
	.transition(background-color, @time, linear);
}

.deselectedTab a {
	background-color: darken(@thirdBackgroundColor, 5%);
}

.deselectedTab a:hover {
	background-color: lighten(@thirdBackgroundColor, 5%);
	color: lighten(@themeBackgroundColor, 5%);
}

#topContainer {
	padding: @topContainerPadding;
}

/* Sorting and filtering */
#sort, #filterContainer, #sortText, #sort span, .source, .destination {
	color: @themeColor;
}

#sort, #filterContainer {
	float: right;
}

#filterContainer {
	height: @sortHeight;
}

#sort, #filter {
	background-color: @sortBackgroundColor;
	font: @sortFont;
	line-height: @sortLineHeight;
	border-radius: @sortBorderWidth;
	.boxShadow(0, 0, @sortBoxShadow, 0, darken(@sortBackgroundColor, 10%));
}

#sort {
	height: @sortHeight;
}

#filter {
	height: 100%;
}

#sort {
	margin: 0 0 0 @sortPadding;
}

#sortText, #filterText, #filterContent {
	float: left;
}

#sortText, #filterText {
	font-weight: bold;
	text-transform: uppercase;
	margin: 0 @sortFilterMargin;
}

#sort span, #sort span:hover, #filterContent span, #filterContent span:hover {
	.transition(border-bottom, @time, linear);
}

#sort span, #filterContent span {
	border-bottom: @sortLinkBorderWidth transparent solid;
	margin: 0 @sortFilterMargin 0 0;
	-webkit-user-select: none;
	-moz-user-select: none;
	-khtml-user-select: none;
	-ms-user-select: none;
}

#sort span:hover, #filterContent span:hover, .flightBar, .node, .source, .destination {
	cursor: pointer;
}

#sort span:hover, #sort span.sortSelected, #filterContent span:hover, #filterContent span.filterSelected {
	border-bottom: @sortLinkBorderWidth @themeColor solid;
}

#filterContent span.filterActive {
	border-bottom: @sortLinkBorderWidth @secondaryColor solid;
}

.filterContainer {
	background-color: @filterStyleBackgroundColor;
	padding: @filterStylePadding;
	margin: @filterStyleMargin 0;
	.boxShadow(0, 0, @filterStyleBoxShadow, 0, darken(@filterStyleBackgroundColor, 10%));
	.transition(background, @time, linear);
}

.filterContainer table, .filterContainer td, .filterContainer tr {
	border: 0;
}

.filterContainer input, .filterStyleButton input {
	color: @filterStyleColor;
	font: @filterStyleFont;
}

.filterStyleButton, .filterContainer span:hover {
	border: 0;
}

/* Search Results */
#results {
	min-width: @minWidth;
	min-height: 100%;
	background: @flightsContainerBackgroundColor;
	padding: 0 0 @resultsPadding 0;
	display: block;
	.contentGradient(@flightsContainerGradientBackgroundColor, transparent, transparent, @flightsContainerGradientBackgroundColor);
}

#timeContainer {
	width: 100%;
	background-color: @timeContainerBackgroundColor;
	color: @timeColor;
	font: @timeContainerFont;
}

#departureTime, #arrivalTime {
	width: 100%;
	background-color: @timeBackgroundColor;
	padding: @timePadding 0;
}

#departureTime {
	margin: 0 0 @margin 0;
}

.flight, .flightBar {
	max-width: @maxWidth;
}

#flights {
	max-width: @flightsWidth;
	margin: 0 auto;
}

.flight {
	height: @flightHeight;
	margin: @flightMargin 0;
	position: relative;
}

.filter, .source, .flightBarTextHidden, .destination, .flight:hover .source, .flight:hover .flightBarTextHidden, .flight:hover .destination {
	.transition(opacity, @time, linear);
}

.filter, .source, .flightBarTextHidden, .destination {
	opacity: 0;
	filter:alpha(opacity=0);
	visibility: hidden;
}

.flight:hover .source, .flight:hover .flightBarTextHidden, .flight:hover .destination {
	opacity: 1;
	filter:alpha(opacity=100);
	visibility: visible;
	cursor: pointer;
}

.flight:hover .departure .node, .flight:hover .arrival .node {
	background-color: @flightHoverBackgroundColor;
}

.node, .flightBar {
	border-radius: @flightBorderWidth;
}

.node, .source, .destination {
	.boxShadow(0, 0, @flightBoxShadow, @flightBoxShadow, darken(@flightBackgroundColor, 10%));
	.transition(background-color, @time, linear);
}

.flightBarTextVisible, .flightBarTextHidden, .source, .destination {
	float: left;
}

.node {
	position: relative;
	width: @nodeWidth;
	height: @flightHeight;
	background-color: @flightBackgroundColor;
	margin: 0 auto;
}

.departure, .flightBar, .arrival {
	position: absolute;
}

.departure, .arrival {
	top: -0.2em;
}

.departure {
	left: 0;
}

.source, .destination {
	width: @sourceWidth;
	background-color: @flightHoverBackgroundColor;
	font: @airportFont;
	text-align: center;
	border-radius: @airportBorderWidth;
	padding: 0.3em 0;
	margin: -3em auto 0 -5.1em;
	position: relative;
}

.source:before, .destination:before {
	content: "";
	left: 45%;
	top: 100%;
	width: 0;
	height: 0;
	border-top: @arrowBorderWidth @flightHoverBackgroundColor solid;
	border-right: @arrowBorderWidthTransparent transparent solid;
	border-left: @arrowBorderWidthTransparent transparent solid;
	position: absolute;
}

.flightBar {
	left: 0;
	top: 0;
	width: 100%;
	height: @flightBarHeight;
	min-width: 325px;
	background: @flightBarBackgroundColor;
	.boxShadow(0, 0, @flightBarBoxShadow, @flightBarBoxShadow, @flightBarBoxShadowColor);
}

.flightBarText {
	font: @flightBarTextFont;
	color: @secondaryBackgroundColor;
	margin: @flightBarTextMarginTop 0 0 @flightBarTextMarginLeft;
}

.flightBarTextVisible {
	color: @themeBackgroundColor;
	font-weight: bold;
	margin: 0 0.5em;
}

.arrival {
	right: 0;
}

.selectFlight {
	background: @secondaryColor;
}

#buttons {
	width: @buttonsWidth;
	height: 100%;
	margin: 0 1em 1em 0;
	float: right;
}

.button {
	width: @buttonWidth;
}
