@(bookings: List[models.Booking], completeBookingForm: Form[controllers.BookingController.CompleteBooking])

@styles = {
	<link rel='stylesheet' type='text/css' href='@routes.Assets.at("stylesheets/recommendations.css")'>
}

@scripts = {
	<script type='text/javascript' src='@routes.Assets.at("javascripts/recommendations.js")'></script>
}

@main("FlightPub - Booking Requests", styles, scripts) {
	<div class="container">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h1 class="panel-title">FlightPub - Booking Requests</h1>
			</div>

			<div class="panel-body">
				<div class="section-heading">
					<h4>Booking Requests</h4>
				</div>
				<hr/>
				@if(completeBookingForm("bookingId").hasErrors) {
					@completeBookingForm("bookingId").errors.map { error =>
						<div class="alert alert-danger">
							<strong>Error! </strong>
							@error.message
						</div>
					}
				}
				<table id="booking-list" class="table table-striped table-hover table-responsive">
					<tbody>
						@bookings.map { booking =>
							@booking.status match {
								case models.Booking.Status.PENDING => {
									<tr>
										<td>Booking @booking.id</td>
										<td class="text-center">
											<div>New Request</div>
										</td>
										<td>
											<a class="btn btn-info btn-xs btn-block" href="@routes.BookingController.recommendFlights(booking.id)">Make Recommendations</a>
										</td>
									</tr>
								}
								case models.Booking.Status.AWAITING_CONFIRMATION => {
									<tr class="info">
										<td>Booking @booking.id</td>
										<td class="text-center">
											<div class="text-info">Final Confirmation</div>
										</td>
										<td>
											<form action="@routes.BookingController.complete()" method="POST" role="form">
												<input name="@completeBookingForm("bookingId").name" type="hidden" value="@booking.id"/>
												<input type="submit" class="btn btn-primary btn-xs btn-block" value="Confirm Booking">
											</form>
										</td>
									</tr>
								}
							}
						}
					</tbody>
				</table>

				<hr/>
				<div class="form-group">
					<a class="btn btn-primary btn-lg col-sm-4 center-block" href="@routes.BookingController.bookingRequests()">Check For Updates</a>
				</div>
			</div>
		</div>
	</div>
}