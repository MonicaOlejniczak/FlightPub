@(recommendFlightsForm: Form[controllers.BookingController.RecommendFlights], possibleFlights: List[models.Flight])

@styles = {
	<link rel='stylesheet' type='text/css' href='@routes.Assets.at("stylesheets/recommendations.css")'>
}

@scripts = {
	<script type='text/javascript' src='@routes.Assets.at("javascripts/recommendations.js")'></script>
}

@main("FlightPub - Recommend Flights", styles, scripts) {
	<div class="container">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h1 class="panel-title">FlightPub - Recommend Flights</h1>
			</div>

			<div class="panel-body">
				<form action="@routes.BookingController.sendRecommendations()" method="POST" role="form" class="form-horizontal">
					@if(recommendFlightsForm.hasGlobalErrors) {
						<div class="alert alert-danger">
							<strong>Error! </strong>
							@recommendFlightsForm.globalError.message
						</div>
					}
					<input name="@recommendFlightsForm("bookingId").name" type="hidden" value="@recommendFlightsForm("bookingId").value"/>

					<div class="section-heading">
						<h4>Select Flights</h4>
					</div>
					<hr/>
					<div class="form-group @if(recommendFlightsForm("recommendedFlightIds").hasErrors || recommendFlightsForm.hasGlobalErrors) {has-error}">
						<div class="col-sm-offset-2 col-sm-8">
							<div class="well">
								@possibleFlights.map { flight =>
									<div class="input-group">
										<span class="input-group-addon">
											<input class="flight-checkbox" type="checkbox" value="@flight.id" name="@recommendFlightsForm("recommendedFlightIds").name()[]"/>
										</span>
										<div class="btn-primary form-control">Flight @flight.flightNumber<span class="glyphicon glyphicon-plane pull-right"></span></div>
									</div>
								}
							</div>
							@if(recommendFlightsForm("recommendedFlightIds").hasErrors) {
								@recommendFlightsForm("recommendedFlightIds").errors.map { error =>
									<span class="label label-danger">@error.message</span>
								}
							}
						</div>
					</div>

					<hr/>
					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-8">
							<input type="submit" class="btn btn-primary" value="Send Recommendations">
							<a href="@* TODO: Configure route for this. *@" class="btn btn-default">Cancel</a>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
}